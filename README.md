# ダンジョンゲーム仕様書

---

## 仕様の決定方法

- 本仕様書は、今後の議論や実装における「確定仕様」の記録簿であり、過去の決定事項や詳細な履歴も残す。
- 仕様詳細は、質問形式による合意（kayabukingのy/n回答）で決定。決定時点の内容を必ず記録し、仕様変更や分岐があればその経緯も記載する。
- **簡略化や見やすさよりも、「合意内容の完全な記録」「決定事項の詳細まで分かること」を優先する。これは決定事項とする（2025-07-20決定）**
- 仕様確定時、決定内容・経緯・補足事項も含めて追記する。
- 会話が途絶えた後に再議論を始める場合は、必ず本仕様書を参照し、過去の決定事項を尊重して進行すること。

---

## 目次

1. ゲーム概要
2. ダンジョン構造
3. バトルシステム
4. 全滅・復活・ペナルティ
5. ギルド・救急車機能
6. 武器・装備・鑑定・トレードシステム
7. 商店・マーケット・価格変動
8. UI/UX要素
9. パーティ募集・マッチング仕様
10. システム詳細（種族・性格・成長・強化・合成等）
11. 職業進化システムと具体的職業リスト・進化条件・分岐図
12. コミュニケーション機能
13. ガチャ・課金
14. 難易度・バランス調整
15. ランキング・履歴・リプレイ
16. アチーブメント
17. オプション・アクセシビリティ
18. フィードバック・サポート
19. セーブ・クラウド連携
20. ブロックチェーン（Cardano L2）保存仕様
21. 仕様変更履歴（全詳細）

---

## 1. ゲーム概要

- プレイヤーは無限階層型ダンジョンを探索・攻略する。階層ごとに異なるテーマ、敵、イベントが用意される。
- 全プレイヤーはゲーム開始時から単一のギルドに強制所属（ギルド未所属状態無し、y）。
- マルチプレイ・ソロ両対応。パーティ人数は通常2～8人、イベント等で16人～数十人まで拡張（y）。
- スマホ・PC両対応UI（y）。
- バトルは完全リアルタイム（ターン制不可、y）。スキル・アイテムはクールタイム/MP等コスト管理（y）。
- バトル操作は「一部手動可（例：スキル選択や回避）」で、完全オートは不可（y）。
- 全滅時、セーブポイント帰還 or ギルド救急車（救援クエスト）による現地復活を選択可能（y）。
- 全滅時の装備ドロップ、他プレイヤーによる回収・救援クエスト発生（y）。
- ダンジョン階層は初回解放時にランダム生成、その後全プレイヤーで固定共有（y）。
- サプライズ階層・裏ボス・特殊イベントはランダム発生＆隠し条件で再出現可能（y）。
- サプライズ階層報酬・限定アイテムもトレード・商店売買可（y）。
- NFT化・ブロックチェーン譲渡等は現時点で不可（y）。

---

## 2. ダンジョン構造

- 無限階層。各階層は「通常」「ボス」「イベント」「サプライズ」などのタイプで分類される。
- ボス階層は10階ごと、イベント階層/サプライズ階層はランダム＆条件発生。
- サプライズ階層（裏ボス、特殊報酬など）は、特定アイテムor特殊アクションで解放される。発生条件は非公開（y）。
- 階層マップは初回のみランダム生成、以降は全プレイヤーで固定。攻略情報共有可。
- 各階層テーマ例：炎、氷、機械、魔界、死者の谷、妖精郷など。
- サプライズ階層報酬は、限定未鑑定アイテムや称号・特殊進化素材等。

---

## 3. バトルシステム

### 基本仕様

- 完全リアルタイム制。全キャラ/敵は速度・クールタイムで行動タイミング決定。
- 行動例：通常攻撃、スキル（MP/CT管理）、必殺技、アイテム、緊急回避等。
- 状態異常・バフ・デバフ：効果時間や解除条件を明示（例：毒は10秒、回復で解除可）。
- パーティ全滅時：蘇生スキル/アイテムによる戦闘中蘇生、救援クエストによる現地復活。
- パーティ構成は完全自由（タンク/アタッカー等の役割強制なし）。
- 連携技・協力必殺技：複数人が同時アクション等で条件満たすと強力スキル発動。
- 報酬は原則全員均等（例外時は必ず記載する）。
- ソロ・マルチで難易度・報酬・経験値・敵強さ等を自動調整。

### 3Dアクションバトル（追加仕様）

- バトルは斜め後方視点の3Dアクションで表現。
- プレイヤーは自由移動・ジャンプ・回避・ガード等が可能。
- カメラ操作（右スティック/画面スワイプ）による回転・ズーム。ロックオンで敵自動追従。
- バトルUI：
    - 左下：仮想スティック（移動）、ガード/回避ボタン
    - 右下：攻撃・スキル（4つ程度）、アイテム、必殺技ボタン
    - 上部：敵HP/状態異常/ミニマップ/演出・カットイン表示
- 必殺技や大技発動時はシネマティックカメラ（横・正面ズーム/カットイン演出）。
- カメラ自動補正/障害物回避ON/OFF切替。
- 状態異常・バフ/デバフ・ダメージ数値・演出などリアルタイムで視覚化（ヒットストップ・画面振動等フィードバック）。
- ロックオン切替、敵頭上アイコン表示、距離・ターゲット表示。

### バトル演出・エフェクト仕様

- 派手で爽快感のあるエフェクトを重視。
- 攻撃・スキル・必殺技でキャラクターごとに個別演出。
- 状態異常やバフ/デバフも視認性良く表示。
- 必殺技使用時はカメラ演出＋カットイン。
- プレイヤー操作の手応えを重視し、ヒットストップ・画面振動を適切に挿入。
- ダメージ・状態アイコン等は即時表示。

### 敵AI・難易度調整

- 敵AIは状況認識型。距離・HP・パーティ状況に応じて行動選択。
- 攻撃/回避/ガード/連携/自己強化など多彩な行動。
- プレイヤーの行動や属性・状態異常に適応する。
- フォーメーションや支援役などの役割分担。
- ボスや特殊敵には固有AIパターンを設定。
- 難易度はノーマル/ハード/エキスパート等で
    - 攻撃力・HP・AI精度・出現数を段階調整
    - ハード以上で連携・回避頻度UP、特殊敵追加
    - パーティ人数や進行度で動的調整
    - サーバー側パラメータで数値・出現率を運用調整
    - ミッション/ボス毎に個別AI設定
- AI挙動ログ・パラメータ可視化ツールを用意し、バランス調整やテストを円滑化。

---

## 4. 全滅・復活・ペナルティ

### 1. セーブポイント帰還
- 装備中アイテムは現地ドロップ。未装備（インベントリ）は失われない。
- ドロップアイテムは回収クエストとして他プレイヤーに発行。
- プレイヤー自身で回収に戻ることも可能。

### 2. ギルド救急車（現地復活）
- 救援クエストをギルド全体に発行。先着で現地到達したプレイヤーが救援報酬を獲得。
- 規定時間内未救援なら装備ドロップ（通常復活扱い）。

### ペナルティ例
- ゴールド一部喪失、経験値ダウンは導入しない（y）。
- 装備ドロップのみで十分なリスク設計。

---

## 5. ギルド・救急車機能

- 全プレイヤー自動ギルド所属。ギルド救急車（救援クエスト）は全体告知。
- 救援報酬：ゴールド、ギルドポイント、成長アイテム等。装備回収クエスト報酬あり。
- 救援クエストは早い者勝ち、現地到達者のみ報酬（y）。

---

## 6. 武器・装備・鑑定・トレードシステム

- 武具・防具・アイテムは未鑑定状態で入手、詳細性能・名称非公開。
- 鑑定方法：
    - 商店でゴールド支払い鑑定。
    - 鑑定スクロール（消費アイテム、1枚1鑑定、商店で高価購入）による現地鑑定。
- 鑑定済みアイテムのみ商店やプレイヤー間で売買・トレード可（y）。
- トレード・商店売買はゴールドのみ。NFTや外部資産化は不可（y）。
- ダイナミックプライシング（人気・レアリティ連動価格）。
- アイテムカテゴリ：武器、防具、アクセサリ、消耗品、素材、進化素材、特殊アイテムなど。
- 装備スロット：右手、左手、防具、頭、胴、脚、アクセサリ×2。
- アイテム等級：ノーマル、レア、エピック、レジェンド、サプライズ等。

---

## 7. 商店・マーケット・価格変動

- 商店在庫はプレイヤー売却分のみ。売り切れでリストから消える。
- 価格は取引件数・装備率等による自動変動。
- サプライズ階層限定アイテムも売買可。
- マーケットは全プレイヤー共通。トレードは1:1のみ。

---

## 8. UI/UX要素

- タイムライン型リアルタイムUI、バトル・マップ・パーティ・救急車情報等を集約。
- モバイル/PC両対応（レスポンシブデザイン）。
- サウンド・フォント・配色・操作補助等、アクセシビリティ重視。
- オプション：BGM/効果音ON-OFF、色覚サポート、フォントサイズ変更等。
- シンプルモード・詳細モード切り替え、ダーク/ライトテーマ。

### 主要画面ワイヤーフレーム（要点）

#### ホーム画面
- プレイヤー情報・通知・進行中クエスト・バナー
- ストーリー/バトル/クエスト/キャラ装備/ショップ/図鑑実績 への導線

#### クエスト一覧
- カテゴリ/進行状況/報酬/詳細パネル/マップ連動表示

#### バトル画面
- 斜め後方3Dビュー・仮想スティック/アクションボタン/カメラ操作
- ミニマップ・敵HP・演出・リアルタイムエフェクト

#### キャラ・装備画面
- 3Dキャラモデル表示（回転・ズーム・装備反映）
- ステータス・装備枠・スキルスロット・所持装備リスト、詳細/強化/売却

#### 実績・コレクション
- リスト（進捗・報酬・詳細）

---

## 9. パーティ募集・マッチング仕様

- 自動マッチング、手動招待、ID指定など多方式を許容。
- パーティ人数は通常2～4人、イベント・レイド時最大8人～数十人まで拡張。
- 募集時に職業・役割・参加条件（例：最低Lv、装備レア度等）指定可。

---

## 10. システム詳細（種族・性格・成長・強化・合成など）

### 種族
- 人間：応用型・スキル多才・転職/進化幅広い。
- エルフ：魔法系・回避/知力型・上位魔法職へ進化しやすい。
- メカ：物理攻撃・サポート・機械召喚、耐久力高い。
- モンスター：特殊技・異常系・一部職業/進化限定。

### 性格
- 善／中立／悪の3タイプで、習得スキル・転職/進化条件に影響。
- 例：悪のみ進化可能な闇系上位職、善のみ進化可能な聖職。

### 成長・強化
- レベルアップ、スキル熟練度、強化アイテム、合成進化、NPC伝授等で成長。
- 装備耐久度・消耗要素は導入しない（y）。

### 合成・進化
- キャラ同士合成で上級/特殊職進化、合成素材により分岐（例：種族割合・性格一致・レア進化素材）。
- 進化条件例：Lv、特定職、性格、素材（カオスジェム等）、イベント達成など。
- 素材例：カオスジェム、魔王の証、永久の書物、サプライズキーなど。

---

## 11. 職業進化システムと具体的職業リスト・進化条件・分岐図

### 【初期職業】（2025-07-20決定：戦士、剣士、重装騎士を「戦士」に統合）
- 戦士（Warrior）：物理攻撃/防御/盾スキル/自己強化/二刀流/連撃/居合/高耐久/挑発/パーティ防御など、「剣士」「重装騎士」要素を統合。
- 魔法使い（Wizard）：攻撃・回復・補助魔法。
- 僧侶（Priest）：回復/バフ/蘇生/サポート特化。
- 盗賊（Thief）：罠解除/アイテム発見/素早い攻撃。
- 狩人（Hunter）：遠距離/動物使役/状態異常付与。
- 忍者（Ninja）：高回避/分身/投擲/隠密。

### 【上級職・進化職】
- 魔剣士（Magic Swordsman）：戦士＋魔法使い（剣技＋魔法）。
- 賢者（Sage）：魔法使い＋僧侶。
- パラディン（Paladin）：戦士＋僧侶。
- アサシン（Assassin）：盗賊＋忍者。
- レンジャー（Ranger）：狩人＋盗賊。
- 機工士（Machinist）：メカ種族専用。
- 魔導エンジニア（Arcane Engineer）：魔法使い＋メカ。
- ドラゴンナイト（Dragon Knight）：モンスター種族専用。

### 【特殊職・隠し職】
- **隠し職は4種類に限定する（2025-07-20決定事項）。**
    1. 闇の使徒（Dark Apostle）：悪性格＋特定職で進化。闇属性最上位職。
    2. 聖女（Saint）：善性格＋僧侶系＋特定アイテムで進化。回復・光属性最上位職。
    3. サムライ（Samurai）：人間限定・戦士系・特定条件で進化。居合・奥義スキル。
    4. ネクロマンサー（Necromancer）：モンスター種族限定・特定素材で進化。死霊操作・蘇生系スキル。

#### 職業進化条件例
- S1（戦士）→S5（サムライ）：「人間」種族＋戦士Lv25＋「サムライの証」入手
- W1（僧侶）→W2（聖女）：善性格＋僧侶Lv30＋「聖女の涙」入手
- T1/H1/N1（盗賊/狩人/忍者）→N3（ネクロマンサー）：モンスター種族＋該当職Lv25＋「死者の書」入手
- S4（パラディン）→X1（闇の使徒）：悪性格＋パラディンLv30＋「魔王の証」入手

---

## 12. コミュニケーション機能

- ロビー・ダンジョン内チャット、エモート、フレンド登録、ミュート機能。
- ギルド単位や階層別チャットチャンネル。

---

## 13. ガチャ・課金

- 課金要素は原則不可（y）。
- ゴールド消費によるガチャ導入。内容・排出率は別紙設定。

---

## 14. 難易度・バランス調整

- 階層ごと段階的難易度上昇、ソロ/マルチ自動調整、敵AI/出現パターン調整。

---

## 15. ランキング・履歴・リプレイ

- 階層到達、ボス討伐、PvP等ランキング。
- プレイ履歴、リプレイ、称号システム。

---

## 16. アチーブメント・やり込み・リワード設計

- 階層クリア、隠しボス討伐、アイテム収集率等の実績・称号・トロフィー。
- 実績/アチーブメント：条件達成で報酬や称号
- コレクション：装備・モンスター・スキル図鑑、コンプリート特典
- ランキング：タイムアタック・スコア等で上位者に限定報酬
- ログインボーナス：デイリー/累計で限定アイテムやガチャ券等

### 具体的なクエスト・実績サンプル

#### クエスト例
- メイン：村を襲うゴブリン討伐 → 経験値500/ゴールド300/武器
- サブ：薬草5個採取 → 回復薬/アクセサリー
- デイリー：バトル3回勝利 → 強化石/ゴールド
- チャレンジ：ノーダメージクリア → レア装備/称号

#### 実績例
- チュートリアル完了、累計100体討伐、レア装備5種獲得、図鑑50%達成、タイムアタッククリア

---

## 17. オプション・アクセシビリティ

- BGM/効果音ON-OFF、音量調整、色覚サポート、フォント・UI調整。
- アクセシビリティ詳細：UI拡大、シンプル/詳細切り替え、ショートカットキー設定。

---

## 18. フィードバック・サポート

- ゲーム内/公式サイトからバグ報告・要望受付、サポート窓口、FAQ。

---

## 19. セーブ・クラウド連携

- ローカル+Google等アカウント連携、端末引継ぎ、複数端末プレイ、オートセーブ。
- セーブデータはクラウドと自動同期。ユーザー任意のバックアップ/リストア機能。

---

## 20. ブロックチェーン（Cardano L2）保存仕様

- 必要最小限のゲームコアデータのみCardanoレイヤー2（Hydra等）に保存。
    - 例：プレイヤーID、進行度、保有アイテム/キャラID・数量、ゴールド残高。
    - NFT化や外部トークン譲渡は不可（現時点y）。
- ゲーム進行/体験用データはオフチェーンで管理、オンチェーンデータで復元可能。

---

## 21. 仕様変更履歴（全詳細ログ）

### 2025-07-20
- 本仕様まとめ・バトルシステム詳細強化・3DアクションバトルUI/仕様・やり込み/リワード設計・AI/難易度設計・クエスト/実績サンプル追加
- 初期職業の「戦士」「剣士」「重装騎士」を「戦士」に統合。進化分岐図や進化条件も修正
- **「簡略化や見易さは優先せず、決定事項の詳細までわかるように反映する」ことを決定事項として明記。**
- **隠し職は4種類（闇の使徒・聖女・サムライ・ネクロマンサー）に限定することを決定、仕様反映。**

### 2025-07-19以前
- アイテム強化/合成、職業進化・種族/性格分岐、隠し職・進化条件表、NFT要素削除、商店ダイナミックプライス化、バトル仕様拡張、救急車機能追加、無限階層化…（詳細別紙）

---

## 補足

- 本仕様書は、簡略化や見やすさよりも「合意経緯・決定内容・詳細な履歴」を重視して記載する。
- 各章の詳細例・表・分岐図・経緯をできるだけ保持し、将来の議論・実装・検証時に参照できるようにする。
